<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
    <title>Advice #27003</title>
  </head>
  <body>
    <table style="float: right; background: #F9F9F9;" border="5"
      cellpadding="10" cellspacing="0">
      <tbody>
        <tr>
          <td>
            <h2> <span class="mw-headline"
                id="Advice_Advisor_-_Rule_Table"> <a
                  href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000"
                  title="Advice Advisor"><span style="color:#1F2BB8;"> Compiler Advice (on TI Wiki)</span></a>  </span></h2>
            <p>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27000"
                title="Compiler/diagnostic messages/C6000/27000"><span
                  style="color:#1F2BB8;"> Advice 27000: Use Optimization Options</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27001"
                title="Compiler/diagnostic messages/C6000/27001"><span
                  style="color:#1F2BB8;"> Advice 27001: Increase Optimization Level</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27002"
                title="Compiler/diagnostic messages/C6000/27002"><span
                  style="color:#1F2BB8;"> Advice 27002: Do not turn off software pipelining</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27003"
                title="Compiler/diagnostic messages/C6000/27003"><span
                  style="color:#1F2BB8;"> Advice 27003: Avoid compiling with debug options</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27004"
                title="Compiler/diagnostic messages/C6000/27004"><span
                  style="color:#1F2BB8;"> Advice 27004: No Performance Advice generated</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30000"
                title="Compiler/diagnostic messages/C6000/30002"><span
                  style="color:#1F2BB8;"> Advice 30000: Prevent Loop Disqualification due to call</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30001"
                title="Compiler/diagnostic messages/C6000/30002"><span
                  style="color:#1F2BB8;"> Advice 30001: Prevent Loop Disqualification due to rts-call</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30002"
                title="Compiler/diagnostic messages/C6000/30002"><span
                  style="color:#1F2BB8;"> Advice 30002: Prevent Loop Disqualification due to asm statement</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30003"
                title="Compiler/diagnostic messages/C6000/30003"><span
                  style="color:#1F2BB8;"> Advice 30003: Prevent Loop Disqualification due to complex condition</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30004"
                title="Compiler/diagnostic messages/C6000/30004"><span
                  style="color:#1F2BB8;"> Advice 30004: Prevent Loop Disqualification due to switch statement</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30005"
                title="Compiler/diagnostic messages/C6000/30005"><span
                  style="color:#1F2BB8;"> Advice 30005: Prevent Loop Disqualification due to arithmetic operation</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30006"
                title="Compiler/diagnostic messages/C6000/30006"><span
                  style="color:#1F2BB8;"> Advice 30006: Prevent Loop Disqualification due to call(2)</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30007"
                title="Compiler/diagnostic messages/C6000/30007"><span
                  style="color:#1F2BB8;"> Advice 30007: Prevent Loop Disqualification due to rts-call(2)</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30008"
                title="Compiler/diagnostic messages/C6000/30008"><span
                  style="color:#1F2BB8;"> Advice 30008: Improve Loop; Qualify with restrict</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30009"
                title="Compiler/diagnostic messages/C6000/30009"><span
                  style="color:#1F2BB8;"> Advice 30009: Improve Loop; Add MUST_ITERATE pragma</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30010"
                title="Compiler/diagnostic messages/C6000/30010"><span
                  style="color:#1F2BB8;"> Advice 30010: Improve Loop; Add MUST_ITERATE pragma(2)</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30011"
                title="Compiler/diagnostic messages/C6000/30011"><span
                  style="color:#1F2BB8;"> Advice 30011: Improve Loop; Add _nassert()</span></a><br>
            </p>
          </td>
        </tr>
      </tbody>
    </table>

<h2><span id="Typical_Advice" class="mw-headline">Typical Advice </span></h2>
<pre> advice #27003: Detecting compilation with debug option -g, which hinders
optimization. To optimize, remove -g or compile with
--optimize_with_debug_option.

</pre>
<h2><span id="Why_is_the_Compiler_giving_this_Advice_.3F"
class="mw-headline">Why is the Compiler giving this
Advice&nbsp;? </span></h2>
<p>The compiler detects that your compilation is being done using
-g, which limits software-pipelining. Software-pipelining is a key
optimization for achieving good performance. This Advice is issued
to alert you to NOT use compiler option -g. -g is a good option
for debugging, but it is recommended that this option not be used
for production code because of the negative performance
implications. </p>
<p><br>
</p>
<h2><span id="What_it_means" class="mw-headline">What it means </span></h2>
<p>For improved performance, at optimization levels --opt_level=2
(or -O2) and -O3, the compiler attempts to software pipeline your
loops. Using -g limits this software-pipelining; you may see a
performance loss with this option. For best performance, use
compiler options -o2 or higher; this is critical for generating
efficient code sequences. In general, to achieve maximal
performance, avoid using the following in production code&nbsp;: </p>
<p><br>
</p>
<ul>
<li>-g: Support full symbolic debug. Good option for debugging.
This inhibits code reordering across source line boundaries and
limits optimizations around function boundaries. This results in
less parallelism, more nops and generally less efficient
schedules. Using this option can cause a 30-50% performance
degradation for control code, generally somewhat less but still
significant degradation for performance critical code. </li>
<li>-ss: Interlist source code into assembly file. As with -g,
this option can negatively impact performance. </li>
<li>-mu: Turn off software-pipelining, which is a key optimization
for achieving good performance. Good option for debugging. Not
recommended for use in production code due to negative
performance implications. </li>
</ul>
<p><br>
The easiest way to improve performance is to invoke optimization
by specifying the --opt_level=n option on the compiler command
line. You can use -On to alias the --opt_level option. The n
denotes the level of optimization (0, 1, 2, and 3), which controls
the type and degree of optimization. </p>
<p><br>
<i><b>--opt_level=0 or -O0</b></i> </p>
<ul>
<li>Performs control-flow-graph simplification </li>
<li>Allocates variables to registers </li>
<li>Performs loop rotation </li>
<li>Eliminates unused code </li>
<li>Simplifies expressions and statements </li>
<li>Expands calls to functions declared inline </li>
</ul>
<p><br>
<i><b>--opt_level=1 or -O1&nbsp;: Performs all --opt_level=0 (-O0)
optimizations, plus:</b></i> </p>
<ul>
<li>Performs local copy/constant propagation </li>
<li>Removes unused assignments </li>
<li>Eliminates local common expressions </li>
</ul>
<p><br>
<i><b>--opt_level=2 or -O2&nbsp;: Performs all --opt_level=1 (-O1)
optimizations, plus:</b></i> </p>
<ul>
<li>Performs software pipelining (see Section 3.2) </li>
<li>Performs loop optimizations </li>
<li>Eliminates global common subexpressions </li>
<li>Eliminates global unused assignments </li>
<li>Converts array references in loops to incremented pointer form
</li>
<li>Performs loop unrolling </li>
</ul>
<p><br>
&middot;<b> --opt_level=3 or -O3&nbsp;: Performs all --opt_level=2
(or -O2) optimizations, plus:</b><i>Italic text</i>* Removes all
functions that are never called </p>
<ul>
<li>Simplifies functions with return values that are never used </li>
<li>Inlines calls to small functions </li>
<li>Reorders function declarations; the called functions
attributes are known when the caller is optimized </li>
<li>Propagates arguments into function bodies when all calls pass
the same value in the same argument position </li>
<li>Identifies file-level variable characteristics </li>
</ul>
<p><br>
Note that -o defaults to -o2. In the absence of any -o options, no
optimization is performed. By default, the -o switch optimizes for
performance. This may increase code size. If code size is an
issue, do not reduce the level of optimization. Instead, use the
-ms switch to affect the optimization goal (performance versus
code size). </p>
<p>For more information, see <a title="C6000 Compiler: Recommended
Compiler Options"
href="/index.php/C6000_Compiler:_Recommended_Compiler_Options">C6000
Compiler: Recommended Compiler Options</a>. </p>
<p><br>
</p>
<h2><span id="Risks.2C_Severity" class="mw-headline">Risks, Severity
</span></h2>
<p>Using -g results in loss of performance. </p>
<p><br>
</p>
<h2><span id="Suggested_Action" class="mw-headline">Suggested Action
</span></h2>
<p>Remove -g from compile options; compile with options -o2 or
higher. </p>
    <h2> <span class="mw-headline" id="More_Resources"> More Resources
      </span></h2>
    <p>Want to squeeze a few more Performance Cycles out of your application?
      Leverage the e2e (Engineer-to-Engineer) online community to get
      all of your Advice questions answered! Or, give back to the community
      with your expertise. </p>
    <p><a
href="http://e2e.ti.com/support/development_tools/compiler/default.aspx"
        class="external text" rel="nofollow">Go to the TI Compiler's e2e online
        forum!</a>&nbsp; </p>
    <div class="hf-nsfooter">
      <table class="wikitable" style="text-align:center;
        background:White;">
        <tbody>
          <tr>
            <td><a
                href="http://processors.wiki.ti.com/index.php/File:E2e.jpg"
                class="image"><img alt="E2e.jpg"
                  src="http://processors.wiki.ti.com/images/8/82/E2e.jpg"
                  height="63" width="305"></a> </td>
            <td><i>For technical support please post your questions at <a
                  href="http://e2e.ti.com/" class="external free"
                  rel="nofollow">http://e2e.ti.com</a>. </i> </td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
