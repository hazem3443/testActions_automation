<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
    <title>Advice #30000</title>
  </head>
  <body>
    <table style="float: right; background: #F9F9F9;" border="5"
      cellpadding="10" cellspacing="0">
      <tbody>
        <tr>
          <td>
            <h2> <span class="mw-headline"
                id="Advice_Advisor_-_Rule_Table"> <a
                  href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000"
                  title="Advice Advisor"><span style="color:#1F2BB8;"> Compiler Advice (on TI Wiki)</span></a>  </span></h2>
            <p>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27000"
                title="Compiler/diagnostic messages/C6000/27000"><span
                  style="color:#1F2BB8;"> Advice 27000: Use Optimization Options</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27001"
                title="Compiler/diagnostic messages/C6000/27001"><span
                  style="color:#1F2BB8;"> Advice 27001: Increase Optimization Level</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27002"
                title="Compiler/diagnostic messages/C6000/27002"><span
                  style="color:#1F2BB8;"> Advice 27002: Do not turn off software pipelining</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27003"
                title="Compiler/diagnostic messages/C6000/27003"><span
                  style="color:#1F2BB8;"> Advice 27003: Avoid compiling with debug options</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27004"
                title="Compiler/diagnostic messages/C6000/27004"><span
                  style="color:#1F2BB8;"> Advice 27004: No Performance Advice generated</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30000"
                title="Compiler/diagnostic messages/C6000/30002"><span
                  style="color:#1F2BB8;"> Advice 30000: Prevent Loop Disqualification due to call</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30001"
                title="Compiler/diagnostic messages/C6000/30002"><span
                  style="color:#1F2BB8;"> Advice 30001: Prevent Loop Disqualification due to rts-call</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30002"
                title="Compiler/diagnostic messages/C6000/30002"><span
                  style="color:#1F2BB8;"> Advice 30002: Prevent Loop Disqualification due to asm statement</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30003"
                title="Compiler/diagnostic messages/C6000/30003"><span
                  style="color:#1F2BB8;"> Advice 30003: Prevent Loop Disqualification due to complex condition</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30004"
                title="Compiler/diagnostic messages/C6000/30004"><span
                  style="color:#1F2BB8;"> Advice 30004: Prevent Loop Disqualification due to switch statement</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30005"
                title="Compiler/diagnostic messages/C6000/30005"><span
                  style="color:#1F2BB8;"> Advice 30005: Prevent Loop Disqualification due to arithmetic operation</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30006"
                title="Compiler/diagnostic messages/C6000/30006"><span
                  style="color:#1F2BB8;"> Advice 30006: Prevent Loop Disqualification due to call(2)</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30007"
                title="Compiler/diagnostic messages/C6000/30007"><span
                  style="color:#1F2BB8;"> Advice 30007: Prevent Loop Disqualification due to rts-call(2)</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30008"
                title="Compiler/diagnostic messages/C6000/30008"><span
                  style="color:#1F2BB8;"> Advice 30008: Improve Loop; Qualify with restrict</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30009"
                title="Compiler/diagnostic messages/C6000/30009"><span
                  style="color:#1F2BB8;"> Advice 30009: Improve Loop; Add MUST_ITERATE pragma</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30010"
                title="Compiler/diagnostic messages/C6000/30010"><span
                  style="color:#1F2BB8;"> Advice 30010: Improve Loop; Add MUST_ITERATE pragma(2)</span></a><br>
              <a href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30011"
                title="Compiler/diagnostic messages/C6000/30011"><span
                  style="color:#1F2BB8;"> Advice 30011: Improve Loop; Add _nassert()</span></a><br>
            </p>
          </td>
        </tr>
      </tbody>
    </table>

<h2><span id="Typical_Advice" class="mw-headline">Typical Advice </span></h2>
<pre> advice #30000: Loop at line 10 cannot be scheduled efficiently, as it
contains a function call ("function_name"). Try to inline call
or consider rewriting loop.

</pre>
<h2><span id="Why_is_the_Compiler_giving_this_Advice_.3F"
class="mw-headline">Why is the Compiler giving this
Advice&nbsp;? </span></h2>
<p>This Advice is issued to alert you to code, specifically a
function call within a loop, that prevents software-pipelining.
Software pipelining is a key optimization for achieving good
performance. You may see reduced performance without software
pipelining. </p>
<p><br>
</p>
<h2><span id="What_it_means:" class="mw-headline">What it means: </span></h2>
<p>The compiler attempts to perform the software pipeline loop
optimization at optimization levels --opt_level=2 (or -O2) and
-O3. If there is a call in the loop, the compiler will attempt to
completely inline the called function, but sometimes this is not
possible. If the compiler cannot inline the called function,
software pipelining cannot be performed. This can severely reduce
the performance of the loop. </p>
<p>Typical testcase: In the code below, the call to the function
"func2" prevents software pipelining. Inlining function "func2" or
rewriting the loop to avoid a function call can avoid pipeline
disqualification; if the loop pipelines successfully you may see
performance improvement. </p>
<pre> void func1(int *p, int *q, int n)
{
unsigned int i;

for (i = 0; i &lt; n; i++)
{
int t = func2(i);

p[i] = q[i] + t;
}
}
</pre>
<h2><span id="Risks.2C_Severity" class="mw-headline">Risks, Severity
</span></h2>
<p>Function calls in loops (such as call to "func2") prevent
software pipelining, which can signficantly hurt performance. </p>
<h2><span id="Suggested_Advice" class="mw-headline">Suggested Advice
</span></h2>
<p>If possible, move calls outside the loop. Otherwise, hand-inline
calls; for instance replace the call to "func2" with the code in
the body of "func2." </p>
    <h2> <span class="mw-headline" id="More_Resources"> More Resources
      </span></h2>
    <p>Want to squeeze a few more Performance Cycles out of your application?
      Leverage the e2e (Engineer-to-Engineer) online community to get
      all of your Advice questions answered! Or, give back to the community
      with your expertise. </p>
    <p><a
href="http://e2e.ti.com/support/development_tools/compiler/default.aspx"
        class="external text" rel="nofollow">Go to the TI Compiler's e2e online
        forum!</a>&nbsp; </p>
    <div class="hf-nsfooter">
      <table class="wikitable" style="text-align:center;
        background:White;">
        <tbody>
          <tr>
            <td><a
                href="http://processors.wiki.ti.com/index.php/File:E2e.jpg"
                class="image"><img alt="E2e.jpg"
                  src="http://processors.wiki.ti.com/images/8/82/E2e.jpg"
                  height="63" width="305"></a> </td>
            <td><i>For technical support please post your questions at <a
                  href="http://e2e.ti.com/" class="external free"
                  rel="nofollow">http://e2e.ti.com</a>. </i> </td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
