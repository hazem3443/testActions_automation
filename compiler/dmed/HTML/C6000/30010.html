<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=windows-1252"
      http-equiv="Content-Type">
    <title>Advice #30010</title>
  </head>
  <body>
    <table style="float: right; background: #F9F9F9;" border="5"
      cellpadding="10" cellspacing="0">
      <tbody>
        <tr>
          <td>
            <h2> <span class="mw-headline"
                id="Advice_Advisor_-_Rule_Table"> <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000"
                  title="Advice Advisor"><span style="color:#1F2BB8;">
                    Compiler Advice (on TI Wiki)</span></a> </span></h2>
            <p> <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27000"
                title="Compiler/diagnostic messages/C6000/27000"><span
                  style="color:#1F2BB8;"> Advice 27000: Use Optimization
                  Options</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27001"
                title="Compiler/diagnostic messages/C6000/27001"><span
                  style="color:#1F2BB8;"> Advice 27001: Increase
                  Optimization Level</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27002"
                title="Compiler/diagnostic messages/C6000/27002"><span
                  style="color:#1F2BB8;"> Advice 27002: Do not turn off
                  software pipelining</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27003"
                title="Compiler/diagnostic messages/C6000/27003"><span
                  style="color:#1F2BB8;"> Advice 27003: Avoid compiling
                  with debug options</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/27004"
                title="Compiler/diagnostic messages/C6000/27004"><span
                  style="color:#1F2BB8;"> Advice 27004: No Performance
                  Advice generated</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30000"
                title="Compiler/diagnostic messages/C6000/30002"><span
                  style="color:#1F2BB8;"> Advice 30000: Prevent Loop
                  Disqualification due to call</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30001"
                title="Compiler/diagnostic messages/C6000/30002"><span
                  style="color:#1F2BB8;"> Advice 30001: Prevent Loop
                  Disqualification due to rts-call</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30002"
                title="Compiler/diagnostic messages/C6000/30002"><span
                  style="color:#1F2BB8;"> Advice 30002: Prevent Loop
                  Disqualification due to asm statement</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30003"
                title="Compiler/diagnostic messages/C6000/30003"><span
                  style="color:#1F2BB8;"> Advice 30003: Prevent Loop
                  Disqualification due to complex condition</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30004"
                title="Compiler/diagnostic messages/C6000/30004"><span
                  style="color:#1F2BB8;"> Advice 30004: Prevent Loop
                  Disqualification due to switch statement</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30005"
                title="Compiler/diagnostic messages/C6000/30005"><span
                  style="color:#1F2BB8;"> Advice 30005: Prevent Loop
                  Disqualification due to arithmetic operation</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30006"
                title="Compiler/diagnostic messages/C6000/30006"><span
                  style="color:#1F2BB8;"> Advice 30006: Prevent Loop
                  Disqualification due to call(2)</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30007"
                title="Compiler/diagnostic messages/C6000/30007"><span
                  style="color:#1F2BB8;"> Advice 30007: Prevent Loop
                  Disqualification due to rts-call(2)</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30008"
                title="Compiler/diagnostic messages/C6000/30008"><span
                  style="color:#1F2BB8;"> Advice 30008: Improve Loop;
                  Qualify with restrict</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30009"
                title="Compiler/diagnostic messages/C6000/30009"><span
                  style="color:#1F2BB8;"> Advice 30009: Improve Loop;
                  Add MUST_ITERATE pragma</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30010"
                title="Compiler/diagnostic messages/C6000/30010"><span
                  style="color:#1F2BB8;"> Advice 30010: Improve Loop;
                  Add MUST_ITERATE pragma(2)</span></a><br>
              <a
href="http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/C6000/30011"
                title="Compiler/diagnostic messages/C6000/30011"><span
                  style="color:#1F2BB8;"> Advice 30011: Improve Loop;
                  Add _nassert()</span></a><br>
            </p>
          </td>
        </tr>
      </tbody>
    </table>
    <h2><span id="Typical_Advice" class="mw-headline">Typical Advice </span></h2>
    <pre> advice #30010: If you know that this loop will always execute atleast
&lt;2&gt; times, try adding "#pragma MUST_ITERATE(2)" just
before the loop.

</pre>
    <h2><span id="Why_is_the_Compiler_giving_this_Advice_.3F"
        class="mw-headline">Why is the Compiler giving this
        Advice&nbsp;? </span></h2>
    <p>You may be able to get better loop performance by adding the
      "MUST_ITERATE" pragma. This Advice is issued to alert you to this
      potential performace improvement in your code. </p>
    <p><br>
    </p>
    <h2><span id="What_it_means:" class="mw-headline">What it means: </span></h2>
    <p>The C6000 architecture is partitioned into two nearly symmetric
      halves. The resource breakdown displayed in the software
      pipelining information, in the asm file, is computed after the
      compiler has partitioned instructions to either the A-side or the
      B-side. If the resources are imbalanced (i.e.; some resources on
      one side are used more than resources on the other) software
      pipelinging is resource-bound, and the loop cannot be efficiently
      scheduled. If the compiler has information about the trip-count
      for the loop, it can optimize the loop to balance resource usage,
      and get better pipelining. </p>
    <p>You can give loop trip-count information to the compiler using
      the "MUST_ITERATE" pragma. The MUST_ITERATE pragma has the syntax:
    </p>
    &nbsp;&nbsp;&nbsp;
    #pragma MUST_ITERATE(min, max, multiple)
    <p>The arguments min and max are programmer-guaranteed minimum and
      maximum trip counts. The trip count is the number of times a loop
      iterates. The trip count of the loop must be evenly divisible by
      multiple. All arguments are optional. For example, if the trip
      count could be 5 or greater, you can specify the argument list as
      follows: </p>
    <pre>   #pragma MUST_ITERATE(5);
</pre>
    <p>However, if the trip count could be any nonzero multiple of 5,
      the pragma would look like this: </p>
    <pre>   #pragma MUST_ITERATE(5, , 5); /* Note the blank field for max */
</pre>
    <p>It is sometimes necessary for you to provide min and multiple in
      order for the compiler to perform unrolling. This is especially
      the case when the compiler cannot easily determine how many
      iterations the loop will perform (that is, the loop has a complex
      exit condition). When specifying a multiple via the MUST_ITERATE
      pragma, results of the program are undefined if the trip count is
      not evenly divisible by multiple. Also, results of the program are
      undefined if the trip count is less than the minimum or greater
      than the maximum specified. If no min is specified, zero is used.
      If no max is specified, the largest possible number is used. If
      multiple MUST_ITERATE pragmas are specified for the same loop, the
      smallest max and largest min are used. </p>
    <p>The MUST_ITERATE pragma specifies to the compiler certain
      properties of a loop. You guarantee that these properties are
      always true. Through the use of the MUST_ITERATE pragma, you can
      guarantee that a loop executes a specific number of times. For
      loops the MUST_ITERATE pragma's third argument, factor or
      multiple, is the most important and should always be specified.
      Furthermore, the MUST_ITERATE pragma should be applied to any
      other loops as often as possible. This is because the information
      provided via the pragma (especially the minimum number of
      iterations) aids the compiler in choosing the best loops and loop
      transformations (that is, software pipelining and nested loop
      transformations). It also helps the compiler reduce code size. </p>
    <p><i>Example 1</i>&nbsp;: The example below tells the compiler that
      the loop is guaranteed to run exactly 10 times: </p>
    <pre>   #pragma MUST_ITERATE(10,10);
   for(i = 0; i &lt; trip_count; i++) { ...
</pre>
    <p>In this example, the compiler attempts to generate a software
      pipelined loop even without the pragma. However, if MUST_ITERATE
      is not specified for a loop such as this, the compiler generates
      code to bypass the loop, to account for the possibility of 0
      iterations. With the pragma specification, the compiler knows that
      the loop iterates at least once and can eliminate the
      loop-bypassing code. MUST_ITERATE can specify a range for the trip
      count as well as a factor of the trip count. </p>
    <p><i>Example 2</i>&nbsp;: This example tells the compiler that the
      loop executes between 8 and 48 times and that the trip_count
      variable is a multiple of 8 (8, 16, 24, 32, 40, 48). The multiple
      argument allows the compiler to unroll the loop. </p>
    <pre>   #pragma MUST_ITERATE(8, 48, 8);
   for(i = 0; i &lt; trip_count; i++) { ...
</pre>
    <p><i>Example 3</i>&nbsp;: You should also consider using
      MUST_ITERATE for loops with complicated bounds. In the following
      example, the compiler would have to generate a divide function
      call to determine, at run time, the exact number of iterations
      performed. The compiler will not do this. In this case, using
      MUST_ITERATE to specify that the loop always executes eight times
      allows the compiler to attempt to generate a software pipelined
      loop: </p>
    <pre>   #pragma MUST_ITERATE(8, 8);
   for(i2 = ipos[2]; i2 &lt; 40; i2 += 5) { ...
</pre>
    <p>For further information on conveying information to the compiler
      to improve performance, see <a title="C6000 Compiler: Tuning
        Software Pipelined Loops"
        href="/index.php/C6000_Compiler:_Tuning_Software_Pipelined_Loops">Tuning
Software

        Pipelined Loops</a> and <a class="new" title="000 CGT
        Optimization Lab - 1 (page does not exist)"
href="/index.php?title=000_CGT_Optimization_Lab_-_1&amp;action=edit&amp;redlink=1">Optimization

        Lab</a>. </p>
    <p><br>
    </p>
    <h2><span id="Risks.2C_Severity" class="mw-headline">Risks, Severity
      </span></h2>
    <p>When you use mechanisms such as restrict, MUST_ITERATE, or
      _nassert, you are conveying extra information to the compiler.
      Always verify all such information is correct for every call. </p>
    <p>Also, while the "MUST_ITERATE" pragma can help you get better
      performance, you must make sure that the syntax is correctly
      followed. Results of the program are undefined if the trip count
      is not evenly divisible by the specified multiple. Also, results
      of the program are undefined if the trip count is less than the
      minimum or greater than the maximum specified. If no min is
      specified, zero is used. If no max is specified, the largest
      possible number is used. If multiple MUST_ITERATE pragmas are
      specified for the same loop, the smallest max and largest min are
      used. </p>
    <p><br>
    </p>
    <h2><span id="Suggested_Action" class="mw-headline">Suggested Action
      </span></h2>
    <p>Use pragma "MUST_ITERATE". </p>
    <h2> <span class="mw-headline" id="More_Resources"> More Resources
      </span></h2>
    <p>Want to squeeze a few more Performance Cycles out of your
      application? Leverage the e2e (Engineer-to-Engineer) online
      community to get all of your Advice questions answered! Or, give
      back to the community with your expertise. </p>
    <p><a
        href="http://e2e.ti.com/support/development_tools/compiler/default.aspx"
        class="external text" rel="nofollow">Go to the TI Compiler's e2e
        online forum!</a>&nbsp; </p>
    <div class="hf-nsfooter">
      <table class="wikitable" style="text-align:center;
        background:White;">
        <tbody>
          <tr>
            <td><a
                href="http://processors.wiki.ti.com/index.php/File:E2e.jpg"
                class="image"><img alt="E2e.jpg"
                  src="http://processors.wiki.ti.com/images/8/82/E2e.jpg"
                  height="63" width="305"></a> </td>
            <td><i>For technical support please post your questions at <a
                  href="http://e2e.ti.com/" class="external free"
                  rel="nofollow">http://e2e.ti.com</a>. </i> </td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
